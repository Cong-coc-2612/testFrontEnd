{"ast":null,"code":"import _classCallCheck from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import Skeleton from'react-loading-skeleton';import'pagination.css';import UserOverview from'components/UserOverview';import Paging from'components/Paging';import{searchUsers}from'components/Header/actions';import{queryListUsers}from'./actions';import'./styles.css';var AllUsers=/*#__PURE__*/function(_React$Component){_inherits(AllUsers,_React$Component);var _super=_createSuper(AllUsers);function AllUsers(props){var _this;_classCallCheck(this,AllUsers);_this=_super.call(this,props);_this.requestData=function(){var params={path:'',param:{page:_this.state.activePage,limit:3,searchString:_this.props.globalSearchString},data:{}};_this.props.queryListUsers(params);};_this.onChangeSelectedPage=function(pageNumber){_this.setState({activePage:pageNumber},function(){if(_this.props.globalSearchString!==''){var params={path:'',param:{page:pageNumber,limit:3,searchString:_this.props.globalSearchString},data:{}};_this.props.searchUsers(params);}else{_this.requestData();}});};_this.state={activePage:1};return _this;}_createClass(AllUsers,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){if(this.props.globalSearchString!==nextProps.globalSearchString&&nextProps.globalSearchString===''){this.requestData();}return true;}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.globalSearchString===''){this.requestData();}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"AllUsers-container-container\"},/*#__PURE__*/React.createElement(\"p\",{className:\"AllUsers-header-text\"},\"Danh s\\xE1ch ng\\u01B0\\u1EDDi d\\xF9ng\"),this.props.globalSearchString!==''&&/*#__PURE__*/React.createElement(\"p\",{className:\"AllUsers-search-text\"},\"K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm cho: \\\"\",this.props.globalSearchString,\"\\\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"AllUsers-container\"},this.props.listUsers&&this.props.listUsers.Users?this.props.listUsers.Users.length>0?this.props.listUsers.Users.map(function(item,index){return/*#__PURE__*/React.createElement(UserOverview,{info:item,index:index,key:index});}):/*#__PURE__*/React.createElement(\"p\",null,\"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o!\"):/*#__PURE__*/React.createElement(Skeleton,null)),/*#__PURE__*/React.createElement(Paging,{currentPage:this.state.activePage,totalPage:this.props.listUsers!=null?this.props.listUsers.TotalPage:0,onChangeSelectedPage:this.onChangeSelectedPage}));}}]);return AllUsers;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{listUsers:state.listUsers,globalSearchString:state.globalSearchString};};export default connect(mapStateToProps,{queryListUsers:queryListUsers,searchUsers:searchUsers})(AllUsers);","map":{"version":3,"sources":["E:/frontEnd/SportTournamentSupportSystemFE/src/components/AllUsers/index.tsx"],"names":["React","connect","Skeleton","UserOverview","Paging","searchUsers","queryListUsers","AllUsers","props","requestData","params","path","param","page","state","activePage","limit","searchString","globalSearchString","data","onChangeSelectedPage","pageNumber","setState","nextProps","nextState","listUsers","Users","length","map","item","index","TotalPage","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport 'pagination.css';\r\nimport UserOverview from 'components/UserOverview';\r\nimport Paging from 'components/Paging';\r\nimport { IBigRequest, IParams } from 'interfaces/common';\r\nimport { IState } from 'redux-saga/reducers';\r\nimport { searchUsers } from 'components/Header/actions';\r\nimport { queryListUsers } from './actions';\r\nimport './styles.css';\r\n\r\ninterface IAllUsersProps extends React.ClassAttributes<AllUsers> {\r\n  listUsers: IParams | null;\r\n  globalSearchString: string;\r\n\r\n  queryListUsers(param: IBigRequest): void;\r\n  searchUsers(param: IBigRequest): void;\r\n}\r\n\r\ninterface IAllUsersState {\r\n  activePage: number;\r\n}\r\n\r\nclass AllUsers extends React.Component<IAllUsersProps, IAllUsersState> {\r\n  constructor(props: IAllUsersProps) {\r\n    super(props);\r\n    this.state = {\r\n      activePage: 1,\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps: IAllUsersProps, nextState: IAllUsersState) {\r\n    if (this.props.globalSearchString !== nextProps.globalSearchString && nextProps.globalSearchString === '') {\r\n      this.requestData();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.globalSearchString === '') {\r\n      this.requestData();\r\n    }\r\n  }\r\n  \r\n  private requestData = () => {\r\n    const params = {\r\n      path: '',\r\n      param: {\r\n        page: this.state.activePage,\r\n        limit: 3,\r\n        searchString: this.props.globalSearchString,\r\n      },\r\n      data: {},\r\n    }\r\n    this.props.queryListUsers(params);\r\n  }\r\n\r\n  private onChangeSelectedPage = (pageNumber: number) => {\r\n    this.setState({ activePage: pageNumber }, () => {\r\n      if (this.props.globalSearchString !== '') {\r\n        const params = {\r\n          path: '',\r\n          param: {\r\n            page: pageNumber,\r\n            limit: 3,\r\n            searchString: this.props.globalSearchString,\r\n          },\r\n          data: {},\r\n        };\r\n        this.props.searchUsers(params);\r\n      } else {\r\n        this.requestData();\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"AllUsers-container-container\">\r\n        <p className=\"AllUsers-header-text\">Danh sách người dùng</p>\r\n        {this.props.globalSearchString !== '' && <p className=\"AllUsers-search-text\">Kết quả tìm kiếm cho: \"{this.props.globalSearchString}\"</p>}\r\n        <div className=\"AllUsers-container\">\r\n          {this.props.listUsers && this.props.listUsers.Users ? ((this.props.listUsers.Users as unknown as IParams[]).length > 0 ? (this.props.listUsers.Users as unknown as IParams[]).map(\r\n            (item, index) => <UserOverview info={item} index={index} key={index} />) : <p>Không tìm thấy kết quả nào!</p>) :\r\n            <Skeleton />\r\n          }\r\n        </div>\r\n        <Paging currentPage={this.state.activePage} totalPage={this.props.listUsers != null ? this.props.listUsers.TotalPage as number : 0} onChangeSelectedPage={this.onChangeSelectedPage} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: IState) => {\r\n  return {\r\n    listUsers: state.listUsers,\r\n    globalSearchString: state.globalSearchString,\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { queryListUsers, searchUsers }\r\n)(AllUsers);"]},"metadata":{},"sourceType":"module"}