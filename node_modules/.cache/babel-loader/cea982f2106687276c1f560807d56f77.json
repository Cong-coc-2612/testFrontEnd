{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"E:\\\\frontEnd\\\\SportTournamentSupportSystemFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(doSignUp),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(watchSignUp);import{call,takeLatest,put}from'redux-saga/effects';import{query,METHOD}from'utils/socketApi';import{cookies}from'utils/cookies';import{COOKIES_TYPE}from'global';import{SIGNUP,COMMON_SHOW_NOTIFICATION}from'redux-saga/actions';var signUp=function signUp(data,path,param){var uri='user';var datas=_objectSpread({},data);var paths=path;var params=_objectSpread({},param);return query(uri,METHOD.POST,datas,params,paths);};function doSignUp(request){var response,data;return _regeneratorRuntime.wrap(function doSignUp$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return call(signUp,request.data.data,request.data.path,request.data.param);case 3:response=_context.sent;data=response.data;if(!(cookies.get(COOKIES_TYPE.AUTH_TOKEN)==null)){_context.next=13;break;}if(!(response.data.error.MessageCode===0)){_context.next=11;break;}_context.next=9;return put({type:request.response.success,payload:data});case 9:_context.next=11;return put({type:COMMON_SHOW_NOTIFICATION,data:{type:'success',title:'Sign Up',content:'Chúng tôi đã gửi cho bạn email, hãy bấm vào đường link chúng tôi gửi để kích hoạt tài khoản',time:new Date()}});case 11:_context.next=15;break;case 13:_context.next=15;return put({type:COMMON_SHOW_NOTIFICATION,data:{type:'error',title:'Sign Up',content:'Đã xảy ra lỗi, vui lòng tải lại trang',time:new Date()}});case 15:_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);_context.next=21;return put({type:COMMON_SHOW_NOTIFICATION,data:{type:'error',title:'Sign Up',content:_context.t0,time:new Date()}});case 21:case\"end\":return _context.stop();}}},_marked,null,[[0,17]]);}export default function watchSignUp(){return _regeneratorRuntime.wrap(function watchSignUp$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return takeLatest(SIGNUP,doSignUp);case 2:case\"end\":return _context2.stop();}}},_marked2);}","map":{"version":3,"sources":["E:/frontEnd/SportTournamentSupportSystemFE/src/redux-saga/sagas/SignUp/signUp.ts"],"names":["doSignUp","watchSignUp","call","takeLatest","put","query","METHOD","cookies","COOKIES_TYPE","SIGNUP","COMMON_SHOW_NOTIFICATION","signUp","data","path","param","uri","datas","paths","params","POST","request","response","get","AUTH_TOKEN","error","MessageCode","type","success","payload","title","content","time","Date"],"mappings":"wXAeUA,Q,iDA4CeC,W,EA3DzB,OAASC,IAAT,CAAeC,UAAf,CAA2BC,GAA3B,KAAsC,oBAAtC,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,iBAA9B,CACA,OAASC,OAAT,KAAwB,eAAxB,CAEA,OAASC,YAAT,KAA6B,QAA7B,CACA,OAASC,MAAT,CAAiBC,wBAAjB,KAAiD,oBAAjD,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,CAAgBC,IAAhB,CAAuCC,KAAvC,CAA0D,CACvE,GAAMC,CAAAA,GAAG,CAAG,MAAZ,CACA,GAAMC,CAAAA,KAAK,kBAAQJ,IAAR,CAAX,CACA,GAAMK,CAAAA,KAAK,CAAGJ,IAAd,CACA,GAAMK,CAAAA,MAAM,kBAAQJ,KAAR,CAAZ,CACA,MAAOT,CAAAA,KAAK,CAACU,GAAD,CAAMT,MAAM,CAACa,IAAb,CAAmBH,KAAnB,CAA0BE,MAA1B,CAAkCD,KAAlC,CAAZ,CACD,CAND,CAQA,QAAUjB,CAAAA,QAAV,CAAmBoB,OAAnB,qKAEqB,MAAMlB,CAAAA,IAAI,CAACS,MAAD,CAASS,OAAO,CAACR,IAAR,CAAaA,IAAtB,CAA4BQ,OAAO,CAACR,IAAR,CAAaC,IAAzC,CAA+CO,OAAO,CAACR,IAAR,CAAaE,KAA5D,CAAV,CAFrB,OAEUO,QAFV,eAGUT,IAHV,CAGiBS,QAAQ,CAACT,IAH1B,MAIQL,OAAO,CAACe,GAAR,CAAYd,YAAY,CAACe,UAAzB,GAAwC,IAJhD,gCAKUF,QAAQ,CAACT,IAAT,CAAcY,KAAd,CAAoBC,WAApB,GAAoC,CAL9C,2CAMQ,MAAMrB,CAAAA,GAAG,CAAC,CACRsB,IAAI,CAAEN,OAAO,CAACC,QAAR,CAAiBM,OADf,CAERC,OAAO,CAAEhB,IAFD,CAAD,CAAT,CANR,wBAUQ,MAAMR,CAAAA,GAAG,CAAC,CACRsB,IAAI,CAAEhB,wBADE,CAERE,IAAI,CAAE,CACJc,IAAI,CAAE,SADF,CAEJG,KAAK,CAAE,SAFH,CAGJC,OAAO,CAAE,6FAHL,CAIJC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EAJF,CAFE,CAAD,CAAT,CAVR,wDAqBM,MAAM5B,CAAAA,GAAG,CAAC,CACRsB,IAAI,CAAEhB,wBADE,CAERE,IAAI,CAAE,CACJc,IAAI,CAAE,OADF,CAEJG,KAAK,CAAE,SAFH,CAGJC,OAAO,CAAE,uCAHL,CAIJC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EAJF,CAFE,CAAD,CAAT,CArBN,0GAgCI,MAAM5B,CAAAA,GAAG,CAAC,CACRsB,IAAI,CAAEhB,wBADE,CAERE,IAAI,CAAE,CACJc,IAAI,CAAE,OADF,CAEJG,KAAK,CAAE,SAFH,CAGJC,OAAO,YAHH,CAIJC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EAJF,CAFE,CAAD,CAAT,CAhCJ,qEA4CA,cAAe,SAAU/B,CAAAA,WAAV,2IACb,MAAME,CAAAA,UAAU,CAACM,MAAD,CAAST,QAAT,CAAhB,CADa","sourcesContent":["import { call, takeLatest, put } from 'redux-saga/effects';\r\nimport { query, METHOD } from 'utils/socketApi';\r\nimport { cookies } from 'utils/cookies';\r\nimport { IRequest, IParams, IBigRequest } from 'interfaces/common';\r\nimport { COOKIES_TYPE } from 'global';\r\nimport { SIGNUP, COMMON_SHOW_NOTIFICATION } from 'redux-saga/actions';\r\n\r\nconst signUp = (data: IParams, path: string | number, param: IParams) => {\r\n  const uri = 'user';\r\n  const datas = { ...data };\r\n  const paths = path;\r\n  const params = { ...param };\r\n  return query(uri, METHOD.POST, datas, params, paths);\r\n};\r\n\r\nfunction* doSignUp(request: IRequest<IBigRequest>) {\r\n  try {\r\n    const response = yield call(signUp, request.data.data, request.data.path, request.data.param);\r\n    const data = response.data;\r\n    if (cookies.get(COOKIES_TYPE.AUTH_TOKEN) == null) {\r\n      if (response.data.error.MessageCode === 0) {\r\n        yield put({\r\n          type: request.response.success,\r\n          payload: data,\r\n        });\r\n        yield put({\r\n          type: COMMON_SHOW_NOTIFICATION,\r\n          data: {\r\n            type: 'success',\r\n            title: 'Sign Up',\r\n            content: 'Chúng tôi đã gửi cho bạn email, hãy bấm vào đường link chúng tôi gửi để kích hoạt tài khoản',\r\n            time: new Date(),\r\n          },\r\n        });\r\n      }\r\n    } else {\r\n      yield put({\r\n        type: COMMON_SHOW_NOTIFICATION,\r\n        data: {\r\n          type: 'error',\r\n          title: 'Sign Up',\r\n          content: 'Đã xảy ra lỗi, vui lòng tải lại trang',\r\n          time: new Date(),\r\n        },\r\n      });\r\n    }\r\n  } catch (error) {\r\n    yield put({\r\n      type: COMMON_SHOW_NOTIFICATION,\r\n      data: {\r\n        type: 'error',\r\n        title: 'Sign Up',\r\n        content: error,\r\n        time: new Date(),\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nexport default function* watchSignUp() {\r\n  yield takeLatest(SIGNUP, doSignUp);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}